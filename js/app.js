!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},i={},s={},o={}.hasOwnProperty,r=/^\.\.?(\/|$)/,n=function(t,e){for(var i,s=[],o=(r.test(e)?t+"/"+e:e).split("/"),n=0,a=o.length;n<a;n++)i=o[n],".."===i?s.pop():"."!==i&&""!==i&&s.push(i);return s.join("/")},a=function(t){return t.split("/").slice(0,-1).join("/")},h=function(e){return function(i){var s=n(a(e),i);return t.require(s,e)}},c=function(t,e){var s=null;s=g&&g.createHot(t);var o={id:t,exports:{},hot:s};return i[t]=o,e(o.exports,h(t),o),o.exports},l=function(t){return s[t]?l(s[t]):t},u=function(t,e){return l(n(a(t),e))},p=function(t,s){null==s&&(s="/");var r=l(t);if(o.call(i,r))return i[r].exports;if(o.call(e,r))return c(r,e[r]);throw new Error("Cannot find module '"+t+"' from '"+s+"'")};p.alias=function(t,e){s[e]=t};var d=/\.[^.\/]+$/,y=/\/index(\.[^\/]+)?$/,f=function(t){if(d.test(t)){var e=t.replace(d,"");o.call(s,e)&&s[e].replace(d,"")!==e+"/index"||(s[e]=t)}if(y.test(t)){var i=t.replace(y,"");o.call(s,i)||(s[i]=t)}};p.register=p.define=function(t,s){if("object"==typeof t)for(var r in t)o.call(t,r)&&p.register(r,t[r]);else e[t]=s,delete i[t],f(t)},p.list=function(){var t=[];for(var i in e)o.call(e,i)&&t.push(i);return t};var g=t._hmr&&new t._hmr(u,p,e,i);p._cache=i,p.hmr=g&&g.wrap,p.brunch=!0,t.require=p}}(),function(){"undefined"==typeof window?this:window;require.register("BattleWave.coffee",function(t,e,i){"use strict";var s,o,r,n,a;o=e("src/Clock"),n=e("src/Surface"),a=e("src/WarpGrid"),r=e("src/Player"),window.CanvasRenderingContext2D.prototype.polygon=function(t,e,i,s){var o,r,n,a;if(s>2){for(r=n=0,a=s;0<=a?n<a:n>a;r=0<=a?++n:--n)o=2*Math.PI/s*r-Math.PI/2,this.lineTo(Math.cos(o)*i+t,Math.sin(o)*i+e);return o=2*Math.PI/s*s-Math.PI/2,this.lineTo(Math.cos(o)*i+t,Math.sin(o)*i+e)}return this.arc(t,e,i,0,2*Math.PI)},i.exports=s=function(){function t(t){var e;this.target=t,this.clock=new o,this.surface=new n(this.target,this),this.loopId=null,this.audio=null,this.crtOff=new Audio("sfx/crt_off.ogg"),this.crtOff.crossOrigin="anonymous",this.crtOn=new Audio("sfx/crt_on.ogg"),this.crtOn.crossOrigin="anonymous",this.playerOne=new r(1),this.playerTwo=new r(2),this.surface.add(this.playerOne),this.surface.add(this.playerTwo),this.surface.playerOne=this.playerOne,this.surface.playerTwo=this.playerTwo,e=[],window.$keyboard=e}return t.prototype.deltaTime=function(){return this.clock.deltaTime()},t.prototype.start=function(){return console.log("[BattleWave] Starting"),this.audio=new Audio("bgm/bgm.ogg"),this.audio.crossOrigin="anonymous",this.audio.play(),this.crtOn.play(),this.loopId=requestAnimationFrame(this.gameLoop.bind(this))},t.prototype.stop=function(){return console.log("[BattleWave] Stopping"),cancelAnimationFrame(this.loopId)},t.prototype.gameLoop=function(){return this.surface.clear(),this.surface.render(),this.loopId=requestAnimationFrame(this.gameLoop.bind(this))},t}(),document.addEventListener("DOMContentLoaded",function(){var t,e;return console.log("[BattleWave] Initializing"),e=document.getElementById("target"),t=new s(e),t.start(),window.addEventListener("keydown",function(t){var e;return e=t.keyCode||t.which,window.$keyboard[e]=!0}),window.addEventListener("keyup",function(t){var e;return e=t.keyCode||t.which,window.$keyboard[e]=!1})})}),require.register("src/Clock.coffee",function(t,e,i){"use strict";var s;i.exports=s=function(){function t(){this.time=e()}var e;return t.prototype.deltaTime=function(){var t,i;return i=e(),t=i-this.time,this.time=i,t/1e3},e=function(){return(new Date).getTime()},t.prototype.getElapsedTime=function(){var t,i;return i=e(),t=i-this.time,t/1e3},t}()}),require.register("src/Drawable.coffee",function(t,e,i){"use strict";var s;i.exports=s=function(){function t(){}return t.prototype.draw=function(t){return null},t}()}),require.register("src/Particle.coffee",function(t,e,i){"usr strict";var s,o;o=e("src/Utils"),i.exports=s=function(){function t(t,e,i,s){this.pos={x:t,y:e},this.velocity={x:0,y:0},this.friction=.95,this.vx=1,this.vy=1,this.alpha=1,this.gravity=!1,this.color="white",this.radius=2,this.setHeading(s),this.setSpeed(i)}return t.prototype.getPos=function(){return this.pos},t.prototype.getSpeed=function(){return Math.sqrt(Math.pow(this.velocity.x,2),Math.pow(this.velocity.y,2))},t.prototype.setSpeed=function(t){var e;return e=this.getHeading(),this.velocity.x=Math.cos(e)*t,this.velocity.y=Math.sin(e)*t},t.prototype.getHeading=function(){return Math.atan2(this.velocity.y,this.velocity.x)},t.prototype.setHeading=function(t){var e;return e=this.getSpeed(),this.velocity.x=Math.cos(t)*e,this.velocity.y=Math.sin(t)*e},t.prototype.angleTo=function(t){return Math.atan2(t.pos.y-this.pos.y,t.pos.x-this.pos.x)},t.prototype.draw=function(t){return t.globalAlpha=this.alpha,t.save(),t.translate(this.pos.x,this.pos.y),t.rotate(this.getHeading()),t.beginPath(),t.fillStyle=this.color,t.polygon(0,0,Math.min(this.radius*(Math.abs(this.velocity.x)*Math.abs(this.velocity.y)/8),6),0),t.fill(),t.restore(),t.globalAlpha=1},t.prototype.render=function(){if(this.update(),null!=this.spring)return this.updateSpring(this.target)},t.prototype.update=function(){return this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.pos.x+=this.velocity.x,this.pos.y+=this.velocity.y},t.prototype.setSpring=function(t){return this.target=t,this.k=.1,this.springLength=.8,this.friction=.9,this.spring=!0},t.prototype.updateSpring=function(){var t,e,i,s,o,r;return s=this.target.pos.x-this.pos.x,o=this.target.pos.y-this.pos.y,i=Math.sqrt(Math.pow(s,2)+Math.pow(o,2)),r=(i-this.springLength)*this.k,t=s/i*r,e=o/i*r,this.velocity.x+=t,this.velocity.y+=e},t.prototype.warp=function(t){if(o.distance(this,t)<10*t.getSpeed()&&o.distance(this,this.target)<30&&(this.setHeading(o.getAngle(t,this)),o.distance(this,t)<70))return this.setSpeed(t.getSpeed())},t}()}),require.register("src/Player.coffee",function(t,e,i){"use strict";var s,o,r,n;s=e("src/Clock"),n=e("src/Wave"),r=e("src/Utils"),i.exports=o=function(){function t(t){var i,r;for(this.playerNumber=t,this.pos={x:0,y:window.innerHeight/2},1===this.playerNumber?this.pos.x=o:this.pos.x=window.innerWidth-o,this.velocity={x:0,y:0},this.friction=.1,this.angle=0,this.colors=e,2===this.playerNumber&&(this.colors=Object.create(e).reverse()),this.drawClock=new s,this.cooldown=new s,this.immunityClock=new s,this.isHit=!1,this.dead=!1,this.gui=document.querySelector(".hp."+this.getClass()),this.deadSpeed=300,this.hitAudio=new Audio("sfx/hit.ogg"),this.hitAudio.crossOrigin="anonymous",this.hitAudio.volume=.3,this.deadAudio=new Audio("sfx/dead.ogg"),this.deadAudio.crossOrigin="anonymous",this.deadAudio.volume=.4,this.hp=5,this.waveAudio=new Audio("sfx/wave.ogg"),this.waveAudio.crossOrigin="anonymous",this.waveAudio.volume=.4,this.waves=[],i=r=0;r<=10;i=++r)this.waves.push(new n(0,0))}var e,i,o,r,a;return o=60,a=50,r=600,e=["#ab52d1","#8a62d7","#6e74df","#5183e4","#3897f2"],i=[{moveUp:[90,87],moveDown:[83],wave:[68]},{moveUp:[38],moveDown:[40],wave:[37]}],t.prototype.getClass=function(){return 1===this.playerNumber?"playerOne":"playerTwo"},t.prototype.getSpeed=function(){var t;return t=Math.abs(this.velocity.y/100),this.dead&&(t=this.deadSpeed,this.deadSpeed=Math.max(this.deadSpeed-.01,0)),t},t.prototype.getDamage=function(){var t;if(!(this.dead||this.isHit&&this.immunityClock.getElapsedTime()<2))return this.hp-=1,this.dead=this.hp<=0,this.dead?this.deadAudio.play():this.hitAudio.play(),console.log("Aww! Only "+this.hp+" HP left"),this.immunityClock.deltaTime(),this.isHit=!0,t=this.gui.querySelectorAll("span:not(.out)"),t[t.length-1]?t[t.length-1].classList.add("out"):void 0},t.prototype.moveUp=function(){if(this.velocity.y-=50,this.velocity.y<-r)return this.velocity.y=-r},t.prototype.moveDown=function(){if(this.velocity.y+=50,this.velocity.y>r)return this.velocity.y=r},t.prototype.wave=function(){var t,e,i,s,o;if(!(this.cooldown.getElapsedTime()<1)){for(this.cooldown.deltaTime(),i=this.waves,s=[],t=0,e=i.length;t<e;t++){if(o=i[t],!o.alive){o.originateFrom(this).shootTo(this.playerNumber),this.waveAudio.play();break}s.push(void 0)}return s}},t.prototype.update=function(){var t,e,s,o;if(!this.dead){e=window.$keyboard,o=[];for(t in i[this.playerNumber-1])o.push(function(){var o,r,n,a;for(n=i[this.playerNumber-1][t],a=[],o=0,r=n.length;o<r;o++){if(s=n[o],e[s]){this[t]();break}a.push(void 0)}return a}.call(this));return o}},t.prototype.hasKeyPressed=function(){var t,e,s,o,r;for(t in i[this.playerNumber-1])for(r=i[this.playerNumber-1][t],e=0,o=r.length;e<o;e++)if(s=r[e],"wave"!==t&&window.$keyboard[s])return!0;return!1},t.prototype.clampYPos=function(){if(this.pos.y<o&&(this.pos.y=o),this.pos.y>window.innerHeight-o)return this.pos.y=window.innerHeight-o},t.prototype.getHitbox=function(){return{pos:this.pos,radius:40}},t.prototype.draw=function(t){var e,i,s,o,r,n,h,c,l,u;if(l=this.drawClock.deltaTime(),c=!0,this.angle+=Math.PI/5*l,this.angle=this.angle%(2*Math.PI),this.update(),this.pos.y+=this.velocity.y*l,this.clampYPos(),this.hasKeyPressed()||(this.velocity.y*=this.friction*l),this.isHit&&this.immunityClock.getElapsedTime()<3?c=1e3*this.immunityClock.getElapsedTime()%300<150:this.isHit=!1,c&&!this.dead){for(t.save(),t.globalAlpha=1,t.lineWidth=2.5,t.translate(this.pos.x,this.pos.y),e=i=0,r=a/10;0<=r?i<r:i>r;e=0<=r?++i:--i)t.save(),e%2===0?t.rotate(this.angle):t.rotate(-this.angle),t.beginPath(),t.strokeStyle=this.colors[e],t.polygon(0,0,a-10*e,6-e),t.stroke(),t.restore();t.restore()}for(n=this.waves,h=[],s=0,o=n.length;s<o;s++)u=n[s],h.push(u.draw());return h},t}()}),require.register("src/Surface.coffee",function(t,e,i){"use strict";var s,o,r,n;n=e("src/WarpGrid"),s=e("src/Clock"),r=e("src/Utils"),i.exports=o=function(){function t(t,e){this.target=t,this.gameInstance=e,this.canvas=document.createElement("CANVAS"),this.target.appendChild(this.canvas),this.message=document.getElementById("message"),this.context=this.canvas.getContext("2d"),this.objects=[],this.playerOne=null,this.playerTwo=null,this.hasDeath=!1,this.deathTimeout=new s,o.bind(this)(),a.bind(this)(window),this.grid=new n(this.width(),this.height()),this.background=this.context.createLinearGradient(0,this.height()/2,this.width(),this.height()/2),this.background.addColorStop(0,"#07274f"),this.background.addColorStop(1,"#501644"),this.vignette=this.context.createRadialGradient(this.width()/2,this.height()/2,100,this.width()/2,this.height()/2,this.width()/2),this.vignette.addColorStop(0,"transparent"),this.vignette.addColorStop(1,"rgba(0, 0, 0, .4)")}var e,i,o,a;return i=["WINS","KILLED IT","ROCKS","IS RAD","IS DOPE","IS KICKIN'"],e=[["NICE","PLAY","SHAKESPEARE"],["LIKE,","OH MY","GOD!"],["EAT","MY","SHORTS"],["WELL AINT","THAT JUST","GREAT"],["YA BUNCH","OF","HOSERS"],["OH","MY,","DAYUM!"]],t.prototype.width=function(){return this.canvas.width},t.prototype.height=function(){return this.canvas.height},t.prototype.clear=function(){return this.context.clearRect(0,0,this.width(),this.height())},t.prototype.add=function(t){return this.objects.push(t)},t.prototype.checkForDeath=function(){if(!this.hasDeath)return this.playerOne.dead||this.playerTwo.dead?(this.hasDeath=!0,this.deathTimeout.deltaTime()):void 0},t.prototype.displayWinMessage=function(){var t,s,o,n,a;if(!this.message.classList.contains("visible"))return s=this.message.getElementsByClassName("one")[0],n=this.message.getElementsByClassName("two")[0],o=this.message.getElementsByClassName("three")[0],this.playerOne.dead&&this.playerTwo.dead?(a=r.randomElement(e),s.innerHTML=a[0],n.innerHTML=a[1],o.innerHTML=a[2]):this.playerOne.dead?(s.innerHTML="PLAYER",n.innerHTML="TWO",o.innerHTML=r.randomElement(i)):(s.innerHTML="PLAYER",n.innerHTML="ONE",o.innerHTML=r.randomElement(i)),this.message.classList.add("visible"),t=this,window.addEventListener("keydown",function(e){var i;if(i=e.keyCode||e.which,!t.target.classList.contains("off"))return 32===i||13===i?(t.target.classList.add("off"),t.gameInstance.audio&&t.gameInstance.audio.pause(),t.gameInstance.crtOff&&t.gameInstance.crtOff.play(),setTimeout(function(){return window.location.reload(!1)},3e3)):void 0})},t.prototype.render=function(){var t,e,i,s;for(this.context.save(),this.context.fillStyle=this.background,this.context.fillRect(0,0,this.width(),this.height()),this.grid.draw(this.context,this.playerOne,this.playerTwo),s=this.objects,t=0,e=s.length;t<e;t++)i=s[t],i.draw(this.context);if(this.context.restore(),this.context.fillStyle=this.vignette,this.context.fillRect(0,0,this.width(),this.height()),null!=this.playerOne&&null!=this.playerTwo&&this.checkForDeath(),this.hasDeath&&this.deathTimeout.getElapsedTime()>3)return this.displayWinMessage()},a=function(t){var e,i;return console.log("[Surface] Resizing"),e=t.innerHeight,i=t.innerWidth,this.canvas.width=i,this.canvas.height=e},o=function(){var t;return t=this,window.addEventListener("resize",function(e){return a.bind(t)(e.target)})},t}()}),require.register("src/Utils.coffee",function(t,e,i){"use strict";var s;i.exports=s=function(){function t(){}return t.norm=function(t,e,i){return(t-e)/(i-e)},t.lerp=function(t,e,i){return(i-e)*t+e},t.clamp=function(t,e,i){return Math.min(Math.max(value,i),e)},t.distance=function(t,e){var i,s;return i=e.pos.x-t.pos.x,s=e.pos.y-t.pos.y,Math.sqrt(Math.pow(i,2)+Math.pow(s,2))},t.getAngle=function(t,e){var i,s;return i=e.pos.x-t.pos.x,s=e.pos.y-t.pos.y,Math.atan2(s,i)},t.intersects=function(t,e){var i,s,o;return s=Math.pow(t.radius-e.radius,2),o=Math.pow(t.radius+e.radius,2),i=Math.pow(t.pos.x-e.pos.x,2)+Math.pow(t.pos.y-e.pos.y,2),s<i&&i<o},t.randomElement=function(t){var e,i;return e=t.length,i=Math.floor(Math.random()*e),t[i]},t}()}),require.register("src/WarpGrid.coffee",function(t,e,i){"use strict";var s,o,r;s=e("src/Particle"),o=e("src/Utils"),i.exports=r=function(){function t(e){var i,o,r,n,a,h,c,l;for(this.particles=[],l=i=0,n=t.GRID_COUNT;0<=n?i<=n:i>=n;l=0<=n?++i:--i){for(h=[],c=o=0,a=t.GRID_COUNT;0<=a?o<=a:o>=a;c=0<=a?++o:--o)r=new s(c*(e/t.GRID_COUNT),l*(e/t.GRID_COUNT),1,0),r.target={pos:{x:c*(e/t.GRID_COUNT),y:l*(e/t.GRID_COUNT)}},r.setSpring(r.target),r.k=.01,r.springLength=.1,r.friction=.7,r.radius=.5,r.color="#a5d4de",h.push(r);this.particles.push(h)}}return t.GRID_COUNT=50,t.prototype.type="WarpGrid",t.prototype.collide=function(t,e){var i,s,r,n,a,h,c,l,u,p,d;for(a=t.getHitbox(),h=e.getHitbox(),c=e.waves,i=0,r=c.length;i<r;i++)if(p=c[i],p.alive&&(d=p.getHitbox(),o.intersects(a,d))){t.getDamage();break}for(l=t.waves,u=[],s=0,n=l.length;s<n;s++)if(p=l[s],p.alive){if(d=p.getHitbox(),o.intersects(h,d)){e.getDamage();break}u.push(void 0)}return u},t.prototype.draw=function(e,i,s){var o,r,n,a,h,c,l,u,p,d;for(c=[],d=n=0,h=t.GRID_COUNT;0<=h?n<=h:n>=h;d=0<=h?++n:--n)c.push(function(){var n,h,c,y,f,g,v,w,m;for(m=[],p=n=0,g=t.GRID_COUNT;0<=g?n<=g:n>=g;p=0<=g?++n:--n){for(a=this.particles[d][p],l=null,p+1<=t.GRID_COUNT&&(l=this.particles[d][p+1]),o=null,d+1<=t.GRID_COUNT&&(o=this.particles[d+1][p]),e.lineWidth=1,e.globalAlpha=.1+a.getSpeed(),r=(220+20*a.getSpeed())%360,e.strokeStyle="hsl("+r+", 50%, 50%)",null!=l&&(e.beginPath(),e.moveTo(a.pos.x,a.pos.y),e.lineTo(l.pos.x,l.pos.y),e.closePath(),e.stroke()),null!=o&&(e.beginPath(),e.moveTo(a.pos.x,a.pos.y),e.lineTo(o.pos.x,o.pos.y),e.closePath(),e.stroke()),e.globalAlpha=1,e.fillStyle="white",a.draw(e),a.render(),a.warp(i),a.warp(s),v=i.waves,h=0,y=v.length;h<y;h++)u=v[h],a.warp(u);for(w=s.waves,c=0,f=w.length;c<f;c++)u=w[c],a.warp(u);m.push(this.collide(i,s))}return m}.call(this));return c},t}()}),require.register("src/Wave.coffee",function(t,e,i){"use strict";var s,o;s=e("src/Clock"),i.exports=o=function(){function t(t,e){this.pos={x:t,y:e},this.velocity={x:0,y:0},this.alive=!1,this.clock=new s}var e;return e=1e3,t.prototype.originateFrom=function(t){return this.pos.x=t.pos.x,this.pos.y=t.pos.y,this.velocity.y=t.velocity.y/5,this},t.prototype.shootTo=function(t){return this.alive=!0,this.velocity.x=e,2===t&&(this.velocity.x=-this.velocity.x),this},t.prototype.getSpeed=function(){return this.alive?10:0},t.prototype.getHitbox=function(){return{pos:this.pos,radius:40}},t.prototype.draw=function(){var t;if(t=this.clock.deltaTime(),this.alive)return this.pos.x+=this.velocity.x*t,this.pos.y+=this.velocity.y*(10*t),(this.pos.y<=0||this.pos.y>=window.innerHeight)&&(this.velocity.y=-this.velocity.y),this.pos.y<=0&&(this.pos.y=0),this.pos.y>=window.innerHeight&&(this.pos.y=window.innerHeight),this.pos.x<0||this.pos.x>window.innerWidth?(this.alive=!1,this.velocity={x:0,y:0}):void 0},t}()}),require.register("___globals___",function(t,e,i){})}(),require("___globals___");
