!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},i={},r={},o={}.hasOwnProperty,s=/^\.\.?(\/|$)/,n=function(t,e){for(var i,r=[],o=(s.test(e)?t+"/"+e:e).split("/"),n=0,h=o.length;n<h;n++)i=o[n],".."===i?r.pop():"."!==i&&""!==i&&r.push(i);return r.join("/")},h=function(t){return t.split("/").slice(0,-1).join("/")},a=function(e){return function(i){var r=n(h(e),i);return t.require(r,e)}},c=function(t,e){var r=null;r=g&&g.createHot(t);var o={id:t,exports:{},hot:r};return i[t]=o,e(o.exports,a(t),o),o.exports},p=function(t){return r[t]?p(r[t]):t},l=function(t,e){return p(n(h(t),e))},u=function(t,r){null==r&&(r="/");var s=p(t);if(o.call(i,s))return i[s].exports;if(o.call(e,s))return c(s,e[s]);throw new Error("Cannot find module '"+t+"' from '"+r+"'")};u.alias=function(t,e){r[e]=t};var d=/\.[^.\/]+$/,y=/\/index(\.[^\/]+)?$/,f=function(t){if(d.test(t)){var e=t.replace(d,"");o.call(r,e)&&r[e].replace(d,"")!==e+"/index"||(r[e]=t)}if(y.test(t)){var i=t.replace(y,"");o.call(r,i)||(r[i]=t)}};u.register=u.define=function(t,r){if("object"==typeof t)for(var s in t)o.call(t,s)&&u.register(s,t[s]);else e[t]=r,delete i[t],f(t)},u.list=function(){var t=[];for(var i in e)o.call(e,i)&&t.push(i);return t};var g=t._hmr&&new t._hmr(l,u,e,i);u._cache=i,u.hmr=g&&g.wrap,u.brunch=!0,t.require=u}}(),function(){"undefined"==typeof window?this:window;require.register("BattleWave.coffee",function(t,e,i){"use strict";var r,o,s,n,h;o=e("src/Clock"),n=e("src/Surface"),h=e("src/WarpGrid"),s=e("src/Player"),window.CanvasRenderingContext2D.prototype.polygon=function(t,e,i,r){var o,s,n,h;if(r>2){for(s=n=0,h=r;0<=h?n<h:n>h;s=0<=h?++n:--n)o=2*Math.PI/r*s-Math.PI/2,this.lineTo(Math.cos(o)*i+t,Math.sin(o)*i+e);return o=2*Math.PI/r*r-Math.PI/2,this.lineTo(Math.cos(o)*i+t,Math.sin(o)*i+e)}return this.arc(t,e,i,0,2*Math.PI)},i.exports=r=function(){function t(t){var e;this.target=t,this.clock=new o,this.surface=new n(this.target),this.loopId=null,this.playerOne=new s(1),this.playerTwo=new s(2),this.surface.add(this.playerOne),this.surface.add(this.playerTwo),this.surface.playerOne=this.playerOne,this.surface.playerTwo=this.playerTwo,e=[],window.$keyboard=e}return t.prototype.deltaTime=function(){return this.clock.deltaTime()},t.prototype.start=function(){return console.log("[BattleWave] Starting"),this.loopId=requestAnimationFrame(this.gameLoop.bind(this))},t.prototype.stop=function(){return console.log("[BattleWave] Stopping"),cancelAnimationFrame(this.loopId)},t.prototype.gameLoop=function(){return this.surface.clear(),this.surface.render(),this.loopId=requestAnimationFrame(this.gameLoop.bind(this))},t}(),document.addEventListener("DOMContentLoaded",function(){var t,e;return console.log("[BattleWave] Initializing"),e=document.getElementById("target"),t=new r(e),t.start(),window.addEventListener("keydown",function(t){var e;return e=t.keyCode||t.which,window.$keyboard[e]=!0}),window.addEventListener("keyup",function(t){var e;return e=t.keyCode||t.which,window.$keyboard[e]=!1})})}),require.register("src/Clock.coffee",function(t,e,i){"use strict";var r;i.exports=r=function(){function t(){this.time=e()}var e;return t.prototype.deltaTime=function(){var t,i;return i=e(),t=i-this.time,this.time=i,t/1e3},e=function(){return(new Date).getTime()},t.prototype.getElapsedTime=function(){var t,i;return i=e(),t=i-this.time,t/1e3},t}()}),require.register("src/Drawable.coffee",function(t,e,i){"use strict";var r;i.exports=r=function(){function t(){}return t.prototype.draw=function(t){return null},t}()}),require.register("src/Particle.coffee",function(t,e,i){"usr strict";var r,o;o=e("src/Utils"),i.exports=r=function(){function t(t,e,i,r){this.pos={x:t,y:e},this.velocity={x:0,y:0},this.friction=.95,this.vx=1,this.vy=1,this.alpha=1,this.gravity=!1,this.color="white",this.radius=2,this.setHeading(r),this.setSpeed(i)}return t.prototype.getPos=function(){return this.pos},t.prototype.getSpeed=function(){return Math.sqrt(Math.pow(this.velocity.x,2),Math.pow(this.velocity.y,2))},t.prototype.setSpeed=function(t){var e;return e=this.getHeading(),this.velocity.x=Math.cos(e)*t,this.velocity.y=Math.sin(e)*t},t.prototype.getHeading=function(){return Math.atan2(this.velocity.y,this.velocity.x)},t.prototype.setHeading=function(t){var e;return e=this.getSpeed(),this.velocity.x=Math.cos(t)*e,this.velocity.y=Math.sin(t)*e},t.prototype.angleTo=function(t){return Math.atan2(t.pos.y-this.pos.y,t.pos.x-this.pos.x)},t.prototype.draw=function(t){return t.globalAlpha=this.alpha,t.save(),t.translate(this.pos.x,this.pos.y),t.rotate(this.getHeading()),t.beginPath(),t.fillStyle=this.color,t.polygon(0,0,Math.min(this.radius*(Math.abs(this.velocity.x)*Math.abs(this.velocity.y)/8),6),0),t.fill(),t.restore(),t.globalAlpha=1},t.prototype.render=function(){if(this.update(),null!=this.spring)return this.updateSpring(this.target)},t.prototype.update=function(){return this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.pos.x+=this.velocity.x,this.pos.y+=this.velocity.y},t.prototype.setSpring=function(t){return this.target=t,this.k=.1,this.springLength=.8,this.friction=.9,this.spring=!0},t.prototype.updateSpring=function(){var t,e,i,r,o,s;return r=this.target.pos.x-this.pos.x,o=this.target.pos.y-this.pos.y,i=Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),s=(i-this.springLength)*this.k,t=r/i*s,e=o/i*s,this.velocity.x+=t,this.velocity.y+=e},t.prototype.warp=function(t){if(o.distance(this,t)<10*t.getSpeed()&&o.distance(this,this.target)<30&&(this.setHeading(o.getAngle(t,this)),o.distance(this,t)<70))return this.setSpeed(t.getSpeed())},t}()}),require.register("src/Player.coffee",function(t,e,i){"use strict";var r,o,s,n;r=e("src/Clock"),n=e("src/Wave"),s=e("src/Utils"),i.exports=o=function(){function t(t){var i,s;for(this.playerNumber=t,this.pos={x:0,y:window.innerHeight/2},1===this.playerNumber?this.pos.x=o:this.pos.x=window.innerWidth-o,this.velocity={x:0,y:0},this.friction=.1,this.angle=0,this.colors=e,2===this.playerNumber&&(this.colors=Object.create(e).reverse()),this.drawClock=new r,this.cooldown=new r,this.immunityClock=new r,this.isHit=!1,this.dead=!1,this.gui=document.querySelector(".hp."+this.getClass()),this.deadSpeed=300,this.hp=5,this.waves=[],i=s=0;s<=10;i=++s)this.waves.push(new n(0,0))}var e,i,o,s;return o=60,s=50,e=["#8e44ad","#7755b8","#6166c4","#4a77cf","#3489db"],i=[{moveUp:[90,87],moveDown:[83],wave:[68]},{moveUp:[38],moveDown:[40],wave:[37]}],t.prototype.getClass=function(){return 1===this.playerNumber?"playerOne":"playerTwo"},t.prototype.getSpeed=function(){var t;return t=Math.abs(this.velocity.y/100),this.dead&&(t=this.deadSpeed,this.deadSpeed=Math.max(this.deadSpeed-.01,0)),t},t.prototype.getDamage=function(){var t;if(!(this.dead||this.isHit&&this.immunityClock.getElapsedTime()<2))return this.hp-=1,this.dead=this.hp<=0,console.log("Aww! Only "+this.hp+" HP left"),this.immunityClock.deltaTime(),this.isHit=!0,t=this.gui.querySelectorAll("span:not(.out)"),t[t.length-1]?t[t.length-1].classList.add("out"):void 0},t.prototype.moveUp=function(){if(this.velocity.y-=50,this.velocity.y<-400)return this.velocity.y=-400},t.prototype.moveDown=function(){if(this.velocity.y+=50,this.velocity.y>400)return this.velocity.y=400},t.prototype.wave=function(){var t,e,i,r,o;if(!(this.cooldown.getElapsedTime()<1.5)){for(this.cooldown.deltaTime(),i=this.waves,r=[],t=0,e=i.length;t<e;t++){if(o=i[t],!o.alive){o.originateFrom(this).shootTo(this.playerNumber);break}r.push(void 0)}return r}},t.prototype.update=function(){var t,e,r,o;if(!this.dead){e=window.$keyboard,o=[];for(t in i[this.playerNumber-1])o.push(function(){var o,s,n,h;for(n=i[this.playerNumber-1][t],h=[],o=0,s=n.length;o<s;o++){if(r=n[o],e[r]){this[t]();break}h.push(void 0)}return h}.call(this));return o}},t.prototype.hasKeyPressed=function(){var t,e,r,o,s;for(t in i[this.playerNumber-1])for(s=i[this.playerNumber-1][t],e=0,o=s.length;e<o;e++)if(r=s[e],"wave"!==t&&window.$keyboard[r])return!0;return!1},t.prototype.clampYPos=function(){if(this.pos.y<o&&(this.pos.y=o),this.pos.y>window.innerHeight-o)return this.pos.y=window.innerHeight-o},t.prototype.getHitbox=function(){return{pos:this.pos,radius:40}},t.prototype.draw=function(t){var e,i,r,o,n,h,a,c,p,l;if(p=this.drawClock.deltaTime(),c=!0,this.angle+=Math.PI/5*p,this.angle=this.angle%(2*Math.PI),this.update(),this.pos.y+=this.velocity.y*p,this.clampYPos(),this.hasKeyPressed()||(this.velocity.y*=this.friction*p),this.isHit&&this.immunityClock.getElapsedTime()<3?c=1e3*this.immunityClock.getElapsedTime()%300<150:this.isHit=!1,c&&!this.dead){for(t.save(),t.globalAlpha=1,t.lineWidth=2.5,t.translate(this.pos.x,this.pos.y),e=i=0,n=s/10;0<=n?i<n:i>n;e=0<=n?++i:--i)t.save(),e%2===0?t.rotate(this.angle):t.rotate(-this.angle),t.beginPath(),t.strokeStyle=this.colors[e],t.polygon(0,0,s-10*e,6-e),t.stroke(),t.restore();t.restore()}for(h=this.waves,a=[],r=0,o=h.length;r<o;r++)l=h[r],a.push(l.draw());return a},t}()}),require.register("src/Surface.coffee",function(t,e,i){"use strict";var r,o;o=e("src/WarpGrid"),i.exports=r=function(){function t(t){this.canvas=document.createElement("CANVAS"),t.appendChild(this.canvas),this.context=this.canvas.getContext("2d"),this.objects=[],this.playerOne=null,this.playerTwo=null,e.bind(this)(),i.bind(this)(window),this.grid=new o(this.width(),this.height()),this.background=this.context.createLinearGradient(0,this.height()/2,this.width(),this.height()/2),this.background.addColorStop(0,"#011022"),this.background.addColorStop(1,"#250824"),this.vignette=this.context.createRadialGradient(this.width()/2,this.height()/2,100,this.width()/2,this.height()/2,this.width()/2),this.vignette.addColorStop(0,"transparent"),this.vignette.addColorStop(1,"rgba(0, 0, 0, .4)")}var e,i;return t.prototype.width=function(){return this.canvas.width},t.prototype.height=function(){return this.canvas.height},t.prototype.clear=function(){return this.context.clearRect(0,0,this.width(),this.height())},t.prototype.add=function(t){return this.objects.push(t)},t.prototype.render=function(){var t,e,i,r;for(this.context.save(),this.context.fillStyle=this.background,this.context.fillRect(0,0,this.width(),this.height()),this.grid.draw(this.context,this.playerOne,this.playerTwo),r=this.objects,t=0,e=r.length;t<e;t++)i=r[t],i.draw(this.context);return this.context.restore(),this.context.fillStyle=this.vignette,this.context.fillRect(0,0,this.width(),this.height())},i=function(t){var e,i;return console.log("[Surface] Resizing"),e=t.innerHeight,i=t.innerWidth,this.canvas.width=i,this.canvas.height=e},e=function(){var t;return t=this,window.addEventListener("resize",function(e){return i.bind(t)(e.target)})},t}()}),require.register("src/Utils.coffee",function(t,e,i){"use strict";var r;i.exports=r=function(){function t(){}return t.norm=function(t,e,i){return(t-e)/(i-e)},t.lerp=function(t,e,i){return(i-e)*t+e},t.clamp=function(t,e,i){return Math.min(Math.max(value,i),e)},t.distance=function(t,e){var i,r;return i=e.pos.x-t.pos.x,r=e.pos.y-t.pos.y,Math.sqrt(Math.pow(i,2)+Math.pow(r,2))},t.getAngle=function(t,e){var i,r;return i=e.pos.x-t.pos.x,r=e.pos.y-t.pos.y,Math.atan2(r,i)},t.intersects=function(t,e){var i,r,o;return r=Math.pow(t.radius-e.radius,2),o=Math.pow(t.radius+e.radius,2),i=Math.pow(t.pos.x-e.pos.x,2)+Math.pow(t.pos.y-e.pos.y,2),r<i&&i<o},t}()}),require.register("src/WarpGrid.coffee",function(t,e,i){"use strict";var r,o,s;r=e("src/Particle"),o=e("src/Utils"),i.exports=s=function(){function t(e){var i,o,s,n,h,a,c,p;for(this.particles=[],p=i=0,n=t.GRID_COUNT;0<=n?i<=n:i>=n;p=0<=n?++i:--i){for(a=[],c=o=0,h=t.GRID_COUNT;0<=h?o<=h:o>=h;c=0<=h?++o:--o)s=new r(c*(e/t.GRID_COUNT),p*(e/t.GRID_COUNT),1,0),s.target={pos:{x:c*(e/t.GRID_COUNT),y:p*(e/t.GRID_COUNT)}},s.setSpring(s.target),s.k=.01,s.springLength=.1,s.friction=.7,s.radius=.5,s.color="#a5d4de",a.push(s);this.particles.push(a)}}return t.GRID_COUNT=50,t.prototype.type="WarpGrid",t.prototype.collide=function(t,e){var i,r,s,n,h,a,c,p,l,u,d;for(h=t.getHitbox(),a=e.getHitbox(),c=e.waves,i=0,s=c.length;i<s;i++)if(u=c[i],u.alive&&(d=u.getHitbox(),o.intersects(h,d))){t.getDamage();break}for(p=t.waves,l=[],r=0,n=p.length;r<n;r++)if(u=p[r],u.alive){if(d=u.getHitbox(),o.intersects(a,d)){e.getDamage();break}l.push(void 0)}return l},t.prototype.draw=function(e,i,r){var o,s,n,h,a,c,p,l,u,d;for(c=[],d=n=0,a=t.GRID_COUNT;0<=a?n<=a:n>=a;d=0<=a?++n:--n)c.push(function(){var n,a,c,y,f,g,v,w,x;for(x=[],u=n=0,g=t.GRID_COUNT;0<=g?n<=g:n>=g;u=0<=g?++n:--n){for(h=this.particles[d][u],p=null,u+1<=t.GRID_COUNT&&(p=this.particles[d][u+1]),o=null,d+1<=t.GRID_COUNT&&(o=this.particles[d+1][u]),e.lineWidth=1,e.globalAlpha=.1+h.getSpeed(),s=(220+20*h.getSpeed())%360,e.strokeStyle="hsl("+s+", 50%, 50%)",null!=p&&(e.beginPath(),e.moveTo(h.pos.x,h.pos.y),e.lineTo(p.pos.x,p.pos.y),e.closePath(),e.stroke()),null!=o&&(e.beginPath(),e.moveTo(h.pos.x,h.pos.y),e.lineTo(o.pos.x,o.pos.y),e.closePath(),e.stroke()),e.globalAlpha=1,e.fillStyle="white",h.draw(e),h.render(),h.warp(i),h.warp(r),v=i.waves,a=0,y=v.length;a<y;a++)l=v[a],h.warp(l);for(w=r.waves,c=0,f=w.length;c<f;c++)l=w[c],h.warp(l);x.push(this.collide(i,r))}return x}.call(this));return c},t}()}),require.register("src/Wave.coffee",function(t,e,i){"use strict";var r,o;r=e("src/Clock"),i.exports=o=function(){function t(t,e){this.pos={x:t,y:e},this.velocity={x:0,y:0},this.alive=!1,this.clock=new r}var e;return e=1e3,t.prototype.originateFrom=function(t){return this.pos.x=t.pos.x,this.pos.y=t.pos.y,this.velocity.y=t.velocity.y/5,this},t.prototype.shootTo=function(t){return this.alive=!0,this.velocity.x=e,2===t&&(this.velocity.x=-this.velocity.x),this},t.prototype.getSpeed=function(){return this.alive?10:0},t.prototype.getHitbox=function(){return{pos:this.pos,radius:40}},t.prototype.draw=function(){var t;if(t=this.clock.deltaTime(),this.alive)return this.pos.x+=this.velocity.x*t,this.pos.y+=this.velocity.y*(10*t),(this.pos.y<=0||this.pos.y>=window.innerHeight)&&(this.velocity.y=-this.velocity.y),this.pos.y<=0&&(this.pos.y=0),this.pos.y>=window.innerHeight&&(this.pos.y=window.innerHeight),this.pos.x<0||this.pos.x>window.innerWidth?(this.alive=!1,this.velocity={x:0,y:0}):void 0},t}()}),require.register("___globals___",function(t,e,i){})}(),require("___globals___");